<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>URL Authorization Rules - App Service Blog</title>
<meta name="description" content="">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="App Service Blog">
<meta property="og:title" content="URL Authorization Rules">
<meta property="og:url" content="https://azure.github.io/AppService/2016/11/17/URL-Authorization-Rules.html">


  <meta property="og:description" content="">



  <meta property="og:image" content="https://azure.github.io/AppService/assets/images/icon.png">





  <meta property="article:published_time" content="2016-11-17T00:00:00+00:00">





  

  


<link rel="canonical" href="https://azure.github.io/AppService/2016/11/17/URL-Authorization-Rules.html">





  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "url": "https://azure.github.io/AppService",
      "logo": "https://azure.github.io/AppService/assets/images/icon.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Azure App Service",
      "url": "https://azure.github.io/AppService",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/AppService/feed.xml" type="application/atom+xml" rel="alternate" title="App Service Blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/AppService/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<!-- Jekyll env: production -->



    <!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="icon" 
      type="image/png" 
      href="/AppService/media/pages/new_app_service_logo_16.png">
<link rel="shortcut icon" 
      type="image/png" 
      href="/AppService/media/pages/new_app_service_logo_16.png">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/AppService/"><img src="/AppService/media/pages/new_app_service_logo_16.svg" alt=""></a>
        
        <a class="site-title" href="/AppService/">
          App Service Blog
          <span class="site-subtitle"></span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/AppService/posts/" >Blog Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/AppService/tags/" >Topics</a>
            </li><li class="masthead__menu-item">
              <a href="https://docs.microsoft.com/en-us/azure/app-service/" >Docs</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/AppService/media/pages/new_app_service_logo_64.svg" alt="Azure App Service" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Azure App Service</h3>
    
    
      <p class="author__bio" itemprop="description">
        An excellent hosting platform for web and API applications.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Redmond, WA</span>
        </li>
      

      
        
          
        
          
            <li><a href="https://azure.microsoft.com/en-us/services/app-service/" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
          
        
          
            <li><a href="/AppService/feed.xml" rel="nofollow noopener noreferrer"><i class="fa fa-rss" aria-hidden="true"></i> Subscribe</a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="URL Authorization Rules">
    <meta itemprop="description" content="">
    <meta itemprop="datePublished" content="November 17, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">URL Authorization Rules
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  7 minute read
 </p>
            
        </header>
      

      <section class="page__content" itemprop="text">
        
        <html><head>
<meta charset="utf-8"/>
</head>
<body>
<div id="page">

<a class="url fn n profile-usercard-hover" href="https://social.msdn.microsoft.com/profile/Chris Gillum (MSFT)" target="_blank">Chris Gillum (MSFT)</a>
<time>    11/17/2016 3:40:36 PM</time>
<hr/>
<div id="content">One of the goals of <a href="https://azure.microsoft.com/en-us/documentation/articles/app-service-authentication-overview/" target="_blank">Azure App Service Authentication / Authorization</a> is to make it very easy to add "auth" to your App Service apps (which is why we often refer to it as Easy Auth). Most of our investments so far have been focused on creating a streamlined <em>authentication</em> setup experience. However, up until now <em>authorization</em> was something developers had to implement mostly on their own. Typically authorization rules involve restricting access to certain resources within your app. Ideally, such authorization rules can be just as simple to set up without writing a bunch of custom code. To that end, we're happy to announce the initial preview of <strong>URL Authorization Rules</strong> in App Service.
<h1 id="configuration">Configuration</h1>
In the initial preview, URL Authorization Rules are defined in an <strong>authorization.json</strong> file (if you prefer, we also support the YAML syntax inside an <strong>authorization.yaml</strong> file).  The feature is enabled automatically when you configure Easy Auth in the management portal and place either an authorization.json file or an authorization.yaml file in the <em>D:\home\site\wwwroot</em> directory of your App Service app. This means you can include the file in your app's source and easily deploy it via Git, Web Deploy, FTP, or any of the <a href="https://azure.microsoft.com/en-us/documentation/articles/app-service-continuous-deployment/">continuous deployment</a> mechanisms supported by App Service.

Here is the basic schema of the configuration file in the JSON syntax:
<pre style=" ">{
  "routes": [
    {
      "http_methods": [ "GET", "POST", "PUT", ... ],
      "path_prefix": "/some/url/prefix",
      "policies": {
        "unauthenticated_action": "AllowAnonymous|RedirectToLoginPage|RejectWith401|RejectWith404"
      }
    },
    ...
  ]
}
</pre>
Now let's talk about what these properties are for:
<ul>
<li><strong>routes:</strong> Required. A collection of URL authorization rules for your App Service app.  In this preview release, each route contains an <strong>http_methods</strong>, a <strong>path_prefix</strong>, and a <strong>policies</strong> property, described below.
<ul>
<ul>
<li><strong>http_methods</strong>: Optional. An array of HTTP verbs that can be used to trigger a route policy. If not specified, all HTTP verbs can be used to trigger the policy.</li>
<li><strong>path_prefix</strong>: Required. A relative URL path under which the specified <em>policies</em> will be enforced. More details on this in a subsequent section.</li>
<li><strong>policies</strong>: A collection of policies to enforce when an HTTP request matches a route. At the time of writing, the only supported sub-property is <strong>unauthenticated_action</strong>.</li>
<li><strong>unauthenticated_action</strong>: Required. One of the following values:
<ul>
<li><strong>AllowAnonymous</strong>: Allows anonymous clients to access the resource.</li>
<li><strong>RedirectToLoginPage</strong>: If a user is unauthenticated, they will be redirected to the login page of the default identity provider that was configured in the portal (for example, Azure Active Directory).</li>
<li><strong>RejectWith401</strong>: Unauthenticated requests will fail with an HTTP 401 status.</li>
<li><strong>RejectWith404</strong>: Unauthenticated requests will fail with an HTTP 404 status. You would choose this over RejectWith401 when you want to hide the existence of HTTP routes within your app.</li>
</ul>
</li>
</ul>
</ul>
</li>
</ul>
As you can see, there are quite a few ways in which you can configure URL-based authorization policies for your app.
<h1 id="">Route Evaluation Order and Wildcards</h1>
In the simplest case, your <em>authorization.json</em> (or <em>authorization.yaml</em>) file will contain one or more static routes. For example, consider the following <em>authorization.json</em> file contents, which represent authorization rules for an Azure Functions app with two HTTP triggers:
<pre style=" ">{
  "routes": [{
      "path_prefix": "/api/AnonymousHttpFunction",
      "policies": { "unauthenticated_action": "AllowAnonymous" }
    },{
      "path_prefix": "/api/ProtectedHttpFunction",
      "policies": { "unauthenticated_action": "RejectWith401" }
    }]
}
</pre>
All HTTP requests to <strong>/api/AnonymousHttpFunction</strong> will be allowed, but requests to <strong>/api/ProtectedHttpFunction</strong> will require a client to be authenticated (e.g. using an access token).  This works well for simple, static APIs but many modern REST-ful APIs will have parameterized URL segments. In those cases, you'll want to take advantage of wildcard segments for your authorization routes. For example, consider a REST-ful API for viewing chapters of books. The name of the book and the chapter may be embedded in the URL:
<pre style=" ">{
  "routes": [{
      "http_methods": [ "GET", "HEAD" ],
      "path_prefix": "/api/book/*/chapter/*/content",
      "policies": { "unauthenticated_action": "RejectWith401" }
    }]
}
</pre>
In the above example there is a wildcard * for both the name of the book and the chapter number. The * will match any single value within that segment.

If your routes represent a resource hierarchy, you will likely need to configure separate policies for parent and child resources. Consider then the following example:
<pre style=" ">{
  "routes": [{
      "path_prefix": "/",
      "policies": { "unauthenticated_action": "AllowAnonymous" }
    },{
      "path_prefix": "/admin",
      "policies": { "unauthenticated_action": "RedirectToLoginPage" }
    }]
}
</pre>
In this case, all URLs will be publicly accessible to anyone on the internet except those at or under <strong>/admin</strong>, which require a user to log in first. In the case of a browser client, navigating to /admin or a sub-path like <strong>/admin/edit_content.php</strong> will result in an automatic redirect to the configured login page. Now, technically a request such as <em>GET /admin/edit_content.php</em> which I used as an example matches both "/" and "/admin" routes. How do we decide which policy to execute? The answer is that the authorization runtime will always execute the policy with the most specific matching URL path (sometimes known as "longest-prefix matching") and only that policy will be executed.
<h1 id="file-share-example">Example: File Share</h1>
The nice thing about the example below is that it literally requires no code - at all. The idea is that you want to put some files on the web and protect access to them. It's also very easy to set up.

The first thing you'll want to do is create a web app and configure Easy Auth with <strong>Azure Active Directory</strong> login. You could choose another provider, but AAD is the simplest to set up. This can be done in a few clicks in the portal as shown in the following screenshot. Make sure to select <strong>Allow Anonymous requests (no action)</strong> under the "Action to take when request is not authenticated".

[caption id="attachment_2095" align="alignnone" width="851"]<a href="/AppService/media/2016/11/Files-EasyAuthSetup.png"><img alt="Setting up Easy Auth with Azure AD authentication." class="size-full wp-image-2095" height="453" src="/AppService/media/2016/11/Files-EasyAuthSetup.png" width="851"/></a> Setting up Easy Auth with Azure AD authentication.[/caption]

Now that your AAD setup is ready, it's time to create the app. Because we're only dealing with file contents, this is easy to setup manually using the Kudu console, which can be found under <strong>Settings -&gt; Advanced Tools</strong>. Or, you can navigate to it directly at <strong>https://{web-app-name}.scm.azurewebsites.net/DebugConsole</strong>. Use the following commands to create the necessary files.
<pre style=" "> cd site\wwwroot
 del hostingstart.html
 mkdir public
 echo "hello, public!" &gt; public\file1.txt
 mkdir admin
 echo "hello, admin!" &gt; admin\file2.txt
</pre>
This will set up your file system structure with some folders and files.  Next we want to enable directory browsing, which is disabled by default. We do this by creating a web.config file in the <em>wwwroot</em> directory. You can create it using the <strong>touch web.config</strong> command and edit by clicking the edit button and populating it with the following configuration:
<pre style=" ">&lt;!--?xml version="1.0"?--&gt;
&lt;configuration&gt;
  &lt;system.webserver&gt;
    &lt;directoryBrowse enabled="true"/&gt;
  &lt;/system.webserver&gt;
&lt;/configuration&gt;
</pre>
Lastly, we need to create the authorization.json file.  You can use the command <strong>touch authorization.json</strong> to create the file. Then, click the edit button and add the following file contents:
<pre style=" ">{
    "routes":[{
        "path_prefix" : "/public",
        "policies" : { "unauthenticated_action" : "AllowAnonymous" }
    },{
        "path_prefix" : "/admin",
        "policies": { "unauthenticated_action" : "RedirectToLoginPage" }
    }]
}
</pre>
To test this, open a new In-Private/Incognito browser session and navigate to your web app. You should see a list of the directories you created as well as the web.config and authorization.json files (note that if you want to hide these infrastructure files, you can do so using the <strong>attrib +h {filename}</strong> command in the Kudu console). You can then navigate to the directories in your browser and observe the authorization behavior.

To help understand what's going on under the covers, I recommend <a href="https://docs.microsoft.com/en-us/azure/app-service-web/web-sites-enable-diagnostic-log#a-nameenablediagahow-to-enable-diagnostics">enabling Application Logging</a> in the portal and then opening the Log Stream blade to see the authorization logs in real-time.

[caption id="attachment_2165" align="alignnone" width="1227"]<a href="/AppService/media/2016/11/Files-LogStream.png"><img alt="Streaming Easy Auth logs in the Azure Portal" class="size-full wp-image-2165" height="602" src="/AppService/media/2016/11/Files-LogStream.png" width="1227"/></a> Streaming Easy Auth logs in the Azure Portal[/caption]
<h1 id="conclusion">Conclusion</h1>
While the example above was a web apps example, this feature works the same whether you're writing a web app, a mobile app backend, an API app, or a Azure Functions app. However, remember that this is an early preview so there are a few things that need to be smoothed out before the feature can be considered GA. For example, when changing the authorization.json (or authorization.yaml) file, you must restart the site before the changes take effect. In the future we would like to have these updates be reflected immediately.

We are also working on additional authorization policies that can be configured. As an example, in a coming update you can expect to see support for restricting access to specified URL routes to Azure AD Security Groups (we actually support this in the runtime today, but need to smooth out the setup experience before we blog about it).

So give this a try and let us know how it goes. If you have questions, please head over to StackOverflow and tag them with <strong>azure-app-service</strong> or <strong>azure-web-sites</strong>, so that our automated processes can find them.</div>
</div></body>
<script src="/AppService/resource/jquery-1.12.1.min.js" type="text/javascript"></script>
<script src="/AppService/resource/replace.js" type="text/javascript"></script>
</html>

        
      </section>

      <footer class="page__meta">
          <p class="page__date"><strong><a href="https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=windowsazurewebsitespreview">Post questions</a> | <a href="https://feedback.azure.com/forums/169385-web-apps">Provide product feedback</a></strong></p>
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-11-17T00:00:00+00:00">November 17, 2016</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=URL+Authorization+Rules%20https%3A%2F%2Fazure.github.io%2FAppService%2F2016%2F11%2F17%2FURL-Authorization-Rules.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fazure.github.io%2FAppService%2F2016%2F11%2F17%2FURL-Authorization-Rules.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fazure.github.io%2FAppService%2F2016%2F11%2F17%2FURL-Authorization-Rules.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/AppService/2016/11/15/Making-Azure-Functions-more-serverless.html" class="pagination--pager" title="Making Azure Functions more “serverless”
">Previous</a>
    
    
      <a href="/AppService/2016/11/29/Use-Azure-Functions-to-run-WordPress-Cron.html" class="pagination--pager" title="Use Azure Functions to run WordPress Cron
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2019/10/07/Mitigate-your-CPU-problems-before-they-even-happen.html" rel="permalink">Mitigate your CPU problems before they happen
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Automatically mitigate CPU anomalies and save yourself from another late-night servicing call.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2019/10/02/Swap-slots-with-arm-templates.html" rel="permalink">Use ARM templates to swap deployment slots
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">You can now use ARM templates to swap deployment slots.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2019/09/04/PHP-Minor-Version-Update-for-September-2019.html" rel="permalink">PHP Minor Version Update for September 2019
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Latest version updates to PHP

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/AppService/media/pages/new_app_service_logo_64.svg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/AppService/2019/08/29/App-Service-on-Azure-Stack-Update-7-Released.html" rel="permalink">Azure App Service on Azure Stack Update 7 Released
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">This afternoon we released the seventh update to Azure App Service on Azure Stack.  This release updates the resource provider and brings the following key c...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><div class="search-searchbar"></div>
  <div class="search-hits"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/Azure" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/Azure/AppService" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/AppService/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Azure App Service. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/AppService/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>


<!-- Including InstantSearch.js library and styling -->
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

<script>
// Instanciating InstantSearch.js with Algolia credentials
const search = instantsearch({
  appId: 'DL7L5DVJ0Y',
  apiKey: '9e199032deaf58c32297ca08220c3e90',
  indexName: 'app-service-blog',
  searchParameters: {
    restrictSearchableAttributes: [
      'title',
      'content'
    ]
  }
});

const hitTemplate = function(hit) {
  const url = hit.url;
  const title = hit._highlightResult.title.value;
  const content = hit._highlightResult.html.value;

  return `
    <div class="list__item">
      <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
        <h2 class="archive__item-title" itemprop="headline"><a href="/AppService${url}">${title}</a></h2>
        <div class="archive__item-excerpt" itemprop="description">${content}</div>
      </article>
    </div>
  `;
}

// Adding searchbar and results widgets
search.addWidget(
  instantsearch.widgets.searchBox({
    container: '.search-searchbar',
    
    placeholder: 'Enter your search term...'
  })
);
search.addWidget(
  instantsearch.widgets.hits({
    container: '.search-hits',
    templates: {
      item: hitTemplate
    }
  })
);

// Starting the search
search.start();
</script>





  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-112478220-2']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>









  </body>
</html>
